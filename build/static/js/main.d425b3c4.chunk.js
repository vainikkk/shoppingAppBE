(this["webpackJsonpshopping-app"]=this["webpackJsonpshopping-app"]||[]).push([[0],{69:function(e,t,a){},70:function(e,t,a){},97:function(e,t,a){var n=a(21);n.defaults.baseURL="http://localhost:4000",n.interceptors.request.use((function(e){return e.headers["Content-type"]="application/json",e}))},99:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),i=a.n(r),o=(a(69),a(70),a(9)),d=a(10),l=a(18),s=a(105),j=a(63),u=a(107),b=a(1),O=function(e){var t=e.show,a=e.handleClose,n=e.confirmDelete,c=e.id,r=e.title,i=e.bodyDescription,o=e.buttonName;return Object(b.jsxs)(u.a,{show:t,onHide:a,children:[Object(b.jsx)(u.a.Header,{closeButton:!0,children:Object(b.jsx)(u.a.Title,{children:r})}),Object(b.jsx)(u.a.Body,{children:i}),Object(b.jsxs)(u.a.Footer,{children:[Object(b.jsx)(j.a,{variant:"secondary",onClick:a,children:"Close"}),Object(b.jsx)(j.a,{variant:"primary",onClick:function(){return n(c)},children:o})]})]})},h=a(104),p=a.p+"static/media/Edit.9de65eb5.svg",g=a.p+"static/media/delete.6dcadd95.svg";var y=function(e){var t=e.data,a=e.deleteCategory,n=e.editCategory;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"object"===typeof t.image?Object(b.jsx)("img",{src:URL.createObjectURL(t.image),alt:"category",className:"round-image"}):Object(b.jsx)("img",{src:"data:image/jpeg;base64,".concat(t.image),alt:"category",className:"round-image"})}),Object(b.jsx)("td",{children:t.title}),Object(b.jsx)("td",{children:t.totalProduct}),Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:p,alt:"EDIT",onClick:function(){return n(t._id)},className:"svg-image"})}),Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:g,alt:"DELETE",onClick:function(){return a(t._id)},className:"svg-image"})})]})};var f=function(e){var t=Object(d.c)((function(e){return e})).filteredData;return Object(b.jsx)("div",{children:Object(b.jsxs)(h.a,{striped:!0,bordered:!0,hover:!0,children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Image"}),Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Total Product"}),Object(b.jsx)("th",{children:"Edit"}),Object(b.jsx)("th",{children:"Delete"})]})}),Object(b.jsx)("tbody",{children:(null===t||void 0===t?void 0:t.length)>0&&t.map((function(t){return Object(b.jsx)(y,{data:t,editCategory:e.handleEdit,deleteCategory:e.deleteCategory},t.id)}))})]})})},x=a(21),m=a.n(x),T="http://localhost:3000",v=T+"/categories",E=T+"/categories?id=",C=T+"/products",S=T+"/products?id=",_=function(){return function(e){m.a.get(v).then((function(e){return e.data})).then((function(t){t&&e({type:"SET_CATEGORY_LIST",payload:t})})).catch((function(t){e({type:"SET_TOAST",payload:t.message,error:!0})}))}},D=function(){return function(e){m.a.get(C).then((function(e){return e.data})).then((function(t){t&&e({type:"SET_PRODUCT_LIST",payload:t})})).catch((function(t){e({type:"SET_TOAST",payload:t.message,error:!0})}))}};function A(e,t){var a=Object.keys(t);return e.filter((function(e){return Object.keys(e).every((function(){return a.every((function(a){return!t[a].length||(!e[a]||I(e[a]).includes(I(t[a])))}))}))}))}var I=function(e){return"string"===typeof e?e.toUpperCase():e},P=a(7),N=a(108),w=a(106);var R=function(e){var t=e.show,a=(e.handleShow,e.handleClose),c=e.addCategory,r=e.editCategory,i=e.parentCategories,o=Object(d.c)((function(e){return e.editData})),s=Object(d.b)(),O=Object(n.useState)({title:"",image:null}),h=Object(l.a)(O,2),p=h[0],g=h[1];return Object(n.useEffect)((function(){o&&g(o)}),[o]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(u.a,{show:t,onHide:a,className:"category-modal-wrapper",children:[Object(b.jsx)(u.a.Header,{children:Object(b.jsx)(u.a.Title,{children:o?"Edit Category":"Add Category"})}),Object(b.jsx)(u.a.Body,{children:Object(b.jsxs)(N.a,{children:[Object(b.jsxs)(N.a.Group,{controlId:"formBasicName",children:[Object(b.jsx)(N.a.Label,{children:"Category Name"}),Object(b.jsx)(N.a.Control,{type:"text",placeholder:"Enter name",name:"title",value:p.title,onChange:function(e){return g(Object(P.a)(Object(P.a)({},p),{},{title:e.target.value}))}})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(b.jsx)(N.a.Label,{children:"Select Parent Category : "}),Object(b.jsxs)(w.a,{onSelect:function(e){return g(Object(P.a)(Object(P.a)({},p),{},{parentCategoryId:e}))},children:[Object(b.jsx)(w.a.Toggle,{id:"dropdown-basic",children:(null===p||void 0===p?void 0:p.parentCategoryId)?i.find((function(e){return e._id===(null===p||void 0===p?void 0:p.parentCategoryId)})).category:"Parent Category"}),Object(b.jsx)(w.a.Menu,{children:(null===i||void 0===i?void 0:i.length)>0&&i.map((function(e){return Object(b.jsx)(w.a.Item,{eventKey:e._id,children:e.category},e._id)}))})]})]}),Object(b.jsx)(N.a.Label,{children:"Image"}),Object(b.jsx)(N.a.File,{id:"custom-file",label:"Upload Category image",custom:!0,onChange:function(e){g(Object(P.a)(Object(P.a)({},p),{},{image:e.target.files[0]}))}})]})}),Object(b.jsxs)(u.a.Footer,{children:[Object(b.jsx)(j.a,{variant:"secondary",onClick:function(){a(),g({title:"",image:null})},children:"Close"}),o?Object(b.jsx)(j.a,{variant:"primary",onClick:function(){p.title&&p.title.trim()?(r(o._id,p),g({title:"",image:null})):s({type:"SET_TOAST",payload:"Please Enter title",error:!0})},children:"Edit Category"}):Object(b.jsx)(j.a,{variant:"primary",onClick:function(){p.title&&p.title.trim()?p.parentCategoryId?p.image?p.rating>5?s({type:"SET_TOAST",payload:"Rating error"}):(c(p),g({title:"",image:null})):s({type:"SET_TOAST",payload:"Please upload a file",error:!0}):s({type:"SET_TOAST",payload:"Please select parent category",error:!0}):s({type:"SET_TOAST",payload:"Please Enter title",error:!0})},children:"Add Category"})]})]})})};var L=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(l.a)(r,2),o=i[0],u=i[1],h=Object(n.useState)(!1),p=Object(l.a)(h,2),g=p[0],y=p[1],x=Object(d.b)(),T=Object(d.c)((function(e){return e})),C=T.data,S=T.filteredData,D=T.parentCategories;return Object(n.useEffect)((function(){x(_()),x((function(e){m.a.get("http://localhost:3000/categories/parent-categories").then((function(e){return e.data})).then((function(t){t&&e({type:"SET_PARENT_CATEGORY_LIST",payload:t})})).catch((function(t){e({type:"SET_TOAST",payload:t.message,error:!0})}))}))}),[x]),Object(b.jsx)("div",{className:"mt-3",children:Object(b.jsxs)(s.a,{children:[Object(b.jsx)("div",{className:"add-button",children:Object(b.jsx)(j.a,{onClick:function(){return c(!a)},variant:"outline-primary",children:"Add Category"})}),C&&C.length>0&&Object(b.jsx)("div",{className:"filter_box_wrapper",children:Object(b.jsx)("div",{className:"rating_wise_filter",children:Object(b.jsx)("input",{type:"text",name:"search",id:"search",class:"form-control",width:"50%",placeholder:"Search category",onChange:function(e){var t={title:e.target.value},a=A(C,t);x({type:"FILTERED_DATA",payload:a})}})})}),S&&S.length>0&&Object(b.jsx)(f,{handleEdit:function(e){c(!0),x({type:"EDIT",payload:e})},deleteCategory:function(e){u(e),y(!0)}}),Object(b.jsx)(R,{editCategory:function(e,t){var a=new FormData;t.title&&a.append("title",t.title),t.parentCategoryId&&a.append("parentCategoryId",t.parentCategoryId),t.image&&a.append("image",t.image),c(!1),x(function(e,t){return function(a){m.a.put(E+e,t).then((function(e){return e.data})).then((function(e){e&&a(_())})).catch((function(e){a({type:"SET_TOAST",payload:e.message,error:!0})}))}}(e,t))},show:a,handleClose:function(){x({type:"REMOVE_CATEGORY_EDIT_DATA"}),c(!1)},addCategory:function(e){var t,a=new FormData;a.append("title",e.title),a.append("parentCategoryId",e.parentCategoryId),a.append("image",e.image),c(!1),x((t=a,function(e){m.a.post(v,t).then((function(e){return e.data})).then((function(t){t&&e(_())})).catch((function(t){e({type:"SET_TOAST",payload:t.message,error:!0})}))}))},parentCategories:D}),Object(b.jsx)(O,{title:"Confirmation Popup",bodyDescription:"Are you sure to Delete!",buttonName:"DELETE",show:g,id:o,handleClose:function(){return y(!1)},confirmDelete:function(e){x(function(e){return function(t){m.a.delete(E+e).then((function(e){return e.data})).then((function(e){t({type:"SET_TOAST",payload:"Deleted Successfully!",error:!1}),t(_())})).catch((function(e){t({type:"SET_TOAST",payload:e.message})}))}}(e)),y(!1)}})]})})};var F=function(e){var t=e.data,a=e.deleteProduct,n=e.editProduct;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"object"===typeof t.image?Object(b.jsx)("img",{src:URL.createObjectURL(t.image),alt:"product",className:"round-image"}):Object(b.jsx)("img",{src:"data:image/jpeg;base64,".concat(t.image),alt:"product",className:"round-image"})}),Object(b.jsx)("td",{children:t.title}),Object(b.jsx)("td",{children:t.categoryName}),Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:p,alt:"EDIT",onClick:function(){return n(t._id)},className:"svg-image"})}),Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:g,alt:"DELETE",onClick:function(){return a(t._id)},className:"svg-image"})})]})};var k=function(e){var t=Object(d.c)((function(e){return e})).productFilteredData;return Object(b.jsx)("div",{children:Object(b.jsxs)(h.a,{striped:!0,bordered:!0,hover:!0,children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Image"}),Object(b.jsx)("th",{children:"Title"}),Object(b.jsx)("th",{children:"Category"}),Object(b.jsx)("th",{children:"Edit"}),Object(b.jsx)("th",{children:"Delete"})]})}),Object(b.jsx)("tbody",{children:(null===t||void 0===t?void 0:t.length)>0&&t.map((function(t){return Object(b.jsx)(F,{data:t,editProduct:e.handleEdit,deleteProduct:e.deleteProduct},t.id)}))})]})})};var U=function(e){var t=e.show,a=e.handleClose,c=e.addProduct,r=e.editProduct,i=e.categories,o=Object(d.c)((function(e){return e.editProductData})),s=Object(d.b)(),O=Object(n.useState)({title:"",image:null,categoryId:""}),h=Object(l.a)(O,2),p=h[0],g=h[1];return Object(n.useEffect)((function(){o&&g(o)}),[o]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(u.a,{show:t,onHide:a,className:"category-modal-wrapper",children:[Object(b.jsx)(u.a.Header,{children:Object(b.jsx)(u.a.Title,{children:o?"Edit Product":"Add Product"})}),Object(b.jsx)(u.a.Body,{children:Object(b.jsxs)(N.a,{children:[Object(b.jsxs)(N.a.Group,{controlId:"formBasicName",children:[Object(b.jsx)(N.a.Label,{children:"Product Name"}),Object(b.jsx)(N.a.Control,{type:"text",placeholder:"Enter name",name:"title",value:p.title,onChange:function(e){return g(Object(P.a)(Object(P.a)({},p),{},{title:e.target.value}))}})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(b.jsx)(N.a.Label,{children:"Select Category : "}),Object(b.jsxs)(w.a,{onSelect:function(e){return g(Object(P.a)(Object(P.a)({},p),{},{categoryId:e,categoryName:i.find((function(t){return t._id===e})).title}))},children:[Object(b.jsx)(w.a.Toggle,{id:"dropdown-basic",children:(null===p||void 0===p?void 0:p.categoryId)?i.find((function(e){return e._id===(null===p||void 0===p?void 0:p.categoryId)})).title:"Parent Category"}),Object(b.jsx)(w.a.Menu,{children:(null===i||void 0===i?void 0:i.length)>0&&i.map((function(e){return Object(b.jsx)(w.a.Item,{eventKey:e._id,children:e.title},e._id)}))})]})]}),Object(b.jsx)(N.a.Label,{children:"Image"}),Object(b.jsx)(N.a.File,{id:"custom-file",label:"Upload Product image",custom:!0,onChange:function(e){g(Object(P.a)(Object(P.a)({},p),{},{image:e.target.files[0]}))}})]})}),Object(b.jsxs)(u.a.Footer,{children:[Object(b.jsx)(j.a,{variant:"secondary",onClick:function(){a(),g({title:"",image:null})},children:"Close"}),o?Object(b.jsx)(j.a,{variant:"primary",onClick:function(){p.title&&p.title.trim()?p.categoryId?(r(o._id,p),g({title:"",image:null})):s({type:"SET_TOAST",payload:"Please select category",error:!0}):s({type:"SET_TOAST",payload:"Please Enter title",error:!0})},children:"Edit Product"}):Object(b.jsx)(j.a,{variant:"primary",onClick:function(){p.title&&p.title.trim()?p.categoryId?p.image?p.rating>5?s({type:"SET_TOAST",payload:"Rating error",error:!0}):(c(p),g({title:"",image:null})):s({type:"SET_TOAST",payload:"Please upload a file",error:!0}):s({type:"SET_TOAST",payload:"Please select category",error:!0}):s({type:"SET_TOAST",payload:"Please Enter title",error:!0})},children:"Add Product"})]})]})})};var M=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(l.a)(r,2),o=i[0],u=i[1],h=Object(n.useState)(!1),p=Object(l.a)(h,2),g=p[0],y=p[1],f=Object(d.b)(),x=Object(d.c)((function(e){return e})),T=x.productData,v=x.productFilteredData,E=x.data;return console.log(v),Object(n.useEffect)((function(){f(_()),f(D())}),[f]),Object(b.jsx)("div",{className:"mt-3",children:Object(b.jsxs)(s.a,{children:[Object(b.jsx)("div",{className:"add-button",children:Object(b.jsx)(j.a,{onClick:function(){return c(!a)},variant:"outline-primary",children:"Add Product"})}),T&&T.length>0&&Object(b.jsxs)("div",{className:"filter_box_wrapper",children:[Object(b.jsx)("div",{className:"rating_wise_filter",children:Object(b.jsx)("input",{type:"text",name:"search",id:"search",class:"form-control",width:"50%",placeholder:"Search Product",onChange:function(e){var t={title:e.target.value},a=A(T,t);f({type:"PRODUCT_FILTERED_DATA",payload:a})}})}),Object(b.jsxs)(w.a,{onSelect:function(e){return function(e){var t=A(T,{categoryName:e});f({type:"PRODUCT_FILTERED_DATA",payload:t})}(e)},variant:"Secondary",children:[Object(b.jsx)(w.a.Toggle,{id:"dropdown-basic",children:(null===T||void 0===T?void 0:T.categoryId)?E.find((function(e){return e._id===(null===T||void 0===T?void 0:T.categoryId)})).title:"Category"}),Object(b.jsx)(w.a.Menu,{children:(null===E||void 0===E?void 0:E.length)>0&&E.map((function(e){return Object(b.jsx)(w.a.Item,{eventKey:e.title,children:e.title},e._id)}))})]})]}),v&&v.length>0&&Object(b.jsx)(k,{handleEdit:function(e){c(!0),f({type:"EDIT_PRODUCT",payload:e})},deleteProduct:function(e){u(e),y(!0)}}),Object(b.jsx)(U,{editProduct:function(e,t){var a=new FormData;t.title&&a.append("title",t.title),t.categoryId&&a.append("categoryId",t.categoryId),t.categoryName&&a.append("categoryName",t.categoryName),t.image&&a.append("image",t.image),c(!1),f(function(e,t){return function(a){m.a.put(S+e,t).then((function(e){return e.data})).then((function(e){e&&a(D())})).catch((function(e){a({type:"SET_TOAST",payload:e.message,error:!0})}))}}(e,t))},show:a,handleClose:function(){f({type:"REMOVE_PRODUCT_EDIT_DATA"}),c(!1)},addProduct:function(e){var t,a=new FormData;a.append("title",e.title),a.append("categoryId",e.categoryId),a.append("categoryName",e.categoryName),a.append("image",e.image),c(!1),f((t=a,function(e){m.a.post(C,t).then((function(e){return e.data})).then((function(t){t&&e(D())})).catch((function(t){e({type:"SET_TOAST",payload:t.message,error:!0})}))}))},categories:E}),Object(b.jsx)(O,{title:"Confirmation Popup",bodyDescription:"Are you sure to Delete!",buttonName:"DELETE",show:g,id:o,handleClose:function(){return y(!1)},confirmDelete:function(e){f(function(e){return function(t){m.a.delete(S+e).then((function(e){return e.data})).then((function(e){t({type:"SET_TOAST",payload:"Deleted Successfully!",error:!1}),t(D())})).catch((function(e){t({type:"SET_TOAST",payload:e.message,error:!0})}))}}(e)),y(!1)}})]})})},B=a(109),G=a(32);var H=function(){return Object(b.jsx)(B.a,{style:{backgroundColor:"#e4e6eb",boxShadow:"1px 1px 2px grey"},children:Object(b.jsxs)(s.a,{children:[Object(b.jsx)(B.a.Brand,{className:"navbar-left",children:Object(b.jsx)(G.b,{to:"/",children:"Category"})}),Object(b.jsx)(B.a.Brand,{className:"navbar-left",children:Object(b.jsx)(G.b,{to:"/products",children:"Products"})}),Object(b.jsx)(B.a.Toggle,{}),Object(b.jsx)(B.a.Collapse,{className:"justify-content-end",children:Object(b.jsx)(B.a.Text,{children:Object(b.jsx)(j.a,{variant:"outline-secondary",onClick:function(){localStorage.removeItem("token")},children:"Logout"})})})]})})},Y=a(110);var V=function(e){var t=e.show,a=e.delay,n=e.closeToast,c=e.message,r=e.type;return Object(b.jsxs)(Y.a,{onClose:n,show:t,delay:a,autohide:!0,style:{position:"absolute",top:20,width:"400px",zIndex:"99999",right:40},children:[Object(b.jsxs)(Y.a.Header,{className:{fontSize:"20px"},children:[Object(b.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded mr-2",alt:""}),Object(b.jsx)("strong",{className:"mr-auto text-danger",children:r})]}),Object(b.jsx)(Y.a.Body,{style:{fontWeight:600,fontSize:"18px"},children:c})]})};var z=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e}));return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(H,{}),Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/",children:Object(b.jsx)(L,{})}),Object(b.jsx)(o.a,{exact:!0,path:"/products",children:Object(b.jsx)(M,{})})]}),t.showToast&&Object(b.jsx)(V,{show:t.showToast,type:t.toastType,delay:"3000",closeToast:function(){return e({type:"CLOSE_TOAST"})},message:t.toastMessage})]})},K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,111)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))},J=a(54),q=a(64),W={isLoggedIn:!1,token:"",data:[],editData:null,editProductData:null,showToast:!1,toastMessage:"",toastType:"",filteredData:[],parentCategories:[],productFilteredData:[],productData:[]},Q=Object(J.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORY_LIST":return Object(P.a)(Object(P.a)({},e),{},{data:t.payload,filteredData:t.payload});case"SET_PRODUCT_LIST":return Object(P.a)(Object(P.a)({},e),{},{productData:t.payload,productFilteredData:t.payload});case"SET_PARENT_CATEGORY_LIST":return Object(P.a)(Object(P.a)({},e),{},{parentCategories:t.payload});case"FILTERED_DATA":return Object(P.a)(Object(P.a)({},e),{},{filteredData:t.payload});case"PRODUCT_FILTERED_DATA":return Object(P.a)(Object(P.a)({},e),{},{productFilteredData:t.payload});case"EDIT":var a=e.data,n=a.find((function(e){return e._id===t.payload}));return Object(P.a)(Object(P.a)({},e),{},{editData:n});case"EDIT_PRODUCT":var c=e.productData,r=c.find((function(e){return e._id===t.payload}));return Object(P.a)(Object(P.a)({},e),{},{editProductData:r});case"REMOVE_PRODUCT_EDIT_DATA":return Object(P.a)(Object(P.a)({},e),{},{editProductData:null});case"REMOVE_CATEGORY_EDIT_DATA":return Object(P.a)(Object(P.a)({},e),{},{editData:null});case"CLOSE_TOAST":return Object(P.a)(Object(P.a)({},e),{},{showToast:!1,toastMessage:null});case"SET_TOAST":return Object(P.a)(Object(P.a)({},e),{},{showToast:!0,toastType:t.error?"Error!":"Success!",toastMessage:t.payload});default:return e}}),Object(J.a)(q.a));a(97),a(98);i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(d.a,{store:Q,children:Object(b.jsx)(G.a,{children:Object(b.jsx)(z,{})})})}),document.getElementById("root")),K()}},[[99,1,2]]]);
//# sourceMappingURL=main.d425b3c4.chunk.js.map